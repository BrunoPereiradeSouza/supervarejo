{% load permission_tags %}
{% load static %}
{% include 'ofertas/partials/head.html' %}

<body>
    {% include 'ofertas/partials/header.html' %}

    <form method="get" class="form-filter-oferta" <div class="mb-3">
        <label action="{% url 'ofertas' %}" for="categorias" name="categoria">{{form.categoria}}</label>
        </div>
        <button type="submit" class="btn btn-primary">Filtrar</button>
    </form>


    <div id="master">
        <div class="main_ofertas_main">
            {% if user|has_role:'administrador' %}
            <a href="{% url 'ofertas_admin' %}">Administrar ofertas</a>
            {% endif %}

            <div class="main_ofertas">
                <div class="main_container_card">
                    <div class="economia">
                        <img src="{% static 'ofertas/img/carrinho.png' %}" alt="carrinho de compras">
                        <h1>CONFIRA AS NOSSAS OFERTAS</h1>
                        <img src="{% static 'ofertas/img/carrinho.png' %}" alt="carrinho de compras">
                    </div>

                    <div class="container-card">
                        {% for oferta in page.object_list %}
                        <div class="card">
                            <img src="{{oferta.imagem.url}}" alt="produto">
                            <div class="card-description">
                                <h2>{{oferta.nome_produto}}</h2>
                                <hr class="card-hr">
                                <strong>
                                    <p class="preco_antigo"><s>DE R$ {{oferta.valor_antigo}}</s></p>
                                    <p class="preco_word">POR</p>
                                    <p class="novo_preco">R$ {{oferta.novo_valor}}</p>
                                </strong>
                            </div>
                        </div>
                        {% endfor %}

                    </div>

                    <div class="pagination">

                        {% if page.has_previous %}
                        <a href="{% url 'ofertas' %}?page={{page.previous_page_number}}">Anterior</a>
                        {% endif %}
                        {% if page.has_next %}
                        <a href="{% url 'ofertas' %}?page={{page.next_page_number}}">Próximo</a>
                        {% endif %}

                    </div>


                    <div id="footer_container_card">
                        <div class="whatsapp">
                            <i id='whatsapp' class="fa-brands fa-whatsapp"></i>
                            <p>(84) 99999-9999</p>
                        </div>
                        <div class="loc">
                            <i id="loc" class="fa-solid fa-location-dot"></i>
                            <p>Rua Alfonso, 587, São Paulo/SP</p>
                        </div>
                        <hr class="ofertas_hr">
                        <p class="ofertas_validas">Ofertas válidas até acabar o estoque!</p>
                    </div>
                </div>
            </div>
        </div>
        <!-- FIM DO CONTEÚDO DO MEIO -->
    </div>
    <!-- FIM DO CONTEÚDO DO MEIO -->

    {% include 'ofertas/partials/footer.html' %}
</body>

{% include 'ofertas/partials/script.html' %}